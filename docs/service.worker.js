//__HEAD__
(()=>{var h="3.0.1";var d="SongBook_v",p=""+d+"_cache",a="sw-"+p+"-"+h,t=function(e){return console.log(""+a+" "+e)};t("loaded");var f=["/"];globalThis.addEventListener("fetch",function(e){t("fetch");function c(n){var r=this;return n?(t("responding with cache "+e.request.url),n):(t("not cached, fetching "+e.request.url),n||this.fetch(e.request).then(function(i){let o=i.clone();return t("Populate cache with "+e.request.url),r.caches.open(a).then(function(s){return s.put(e.request,o)}),i}))}return e.respondWith(caches.match(e.request.url).then(c).catch(function(){return caches.match("/")}))});globalThis.addEventListener("install",function(e){t("install");function c(n){return t("adding urls to cache"),n.addAll(f),this.skipWaiting()}return e.waitUntil(caches.open(a).then(c))});globalThis.addEventListener("activate",function(e){t("activate");function c(n){var r=this;let i=n.map(async function(o,s){if(t("checking cache "+o),o!==a){t("deleting cache "+o);let l=await r.caches.delete(o);return t("deletion of "+o+" result: "+l)}});return Promise.all(i)}return e.waitUntil(caches.keys().then(c))});})();
//__FOOT__
