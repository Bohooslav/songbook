//__HEAD__
(()=>{var h="3.0.0";var d="SongBook_v",p=""+d+"_cache",a="sw-"+p+"-"+h,t=function(e){return console.log(""+a+" "+e)};t("loaded");var f=["/"];globalThis.addEventListener("fetch",function(e){t("fetch");function o(n){var r=this;return n?(t("responding with cache "+e.request.url),n):(t("not cached, fetching "+e.request.url),n||this.fetch(e.request).then(function(i){let c=i.clone();return t("Populate cache with "+e.request.url),r.caches.open(a).then(function(s){return s.put(e.request,c)}),i}))}return e.respondWith(caches.match(e.request.url).then(o).catch(function(){return caches.match("/")}))});globalThis.addEventListener("install",function(e){t("install");function o(n){return t("adding urls to cache"),n.addAll(f),this.skipWaiting()}return e.waitUntil(caches.open(a).then(o))});globalThis.addEventListener("activate",function(e){t("activate");function o(n){var r=this;let i=n.map(async function(c,s){if(t("checking cache "+c),c!==a){t("deleting cache "+c);let l=await r.caches.delete(c);return t("deletion of "+c+" result: "+l)}});return Promise.all(i)}return e.waitUntil(caches.keys().then(o))});})();
//__FOOT__
